BioSamples Metadata Model
=========================

The BioSamples archive stores metadata about samples, such as collection date, location, and organism type, to aid in their discovery and re-analysis. These samples can be associated with data derived from them, which is deposited in other archives such as ENA. Samples must first be submitted to BioSamples prior to submitting data to ENA.

Samples for BioSamples only have a few mandatory fields.

- sample name
- release date (publication date for the sample)
- organism

Partners should submit rich metadata where possible as this will enable discovery and reuse of registered samples. Submitters may add add as many custom metadata attributes as desired, which will be indexed and searchable in BioSamples.


Sample Checklists
-----------------
To increase standardisation and ensure that each sample is registered with at least a minimum amount of metadata, ENA provides GSC-based `Sample Checklists <https://www.ebi.ac.uk/ena/browser/checklists>`_.
These provide a set of attributes which are mandatory and recommended for ENA. If you cannot provide a value for a recommended field, provide whatever minimal metadata is available, as you can `update your samples <../update/update-samples.html>`_ with the appropriate metadata later.
If you cannot provide a value for a mandatory field, please see :ref:`Reporting Missing Values` for the appropriate values.

.. note:: Registering a BioSample with an ENA checklist is a requirement for submitting data related to this sample to ENA.

These checklists are developed in collaboration with different research communities to ensure that they are relevant and realistic for their context.
Note that each checklist provides a set of mandatory values which must always be provided, as well as recommended values which should be provided wherever possible,
and optional values which are suggested values not relevant to every case. When registering a sample, it is important to choose the most relevant sample checklist available and provide the most metadata possible.


.. _Sample Relationships:

Sample Relationships in BioSamples
----------------------------------

Sample relationships describe the relationship between two BioSamples. The relationships can be submission, technical, or biological relationships. It links different samples together and supports relationship-based graph searches.
The sample relationship is submitted to BioSamples by providing the source, type, and target. Below is an example of sample relationships in BioSamples.

.. code-block:: json

   "relationships" : [ {
       "source" : "SAMEA1111111",
       "type" : "derived from",
       "target" : "SAMEA2222222"
     }, {
       "source" : "SAMEG00000",
       "type" : "has member",
       "target" : "SAMEA1111111"
   } ]


When the submitter provides relationship information in one sample, the reverse relationships in corresponding samples will be generated automatically. BioSamples doesn’t validate the type, direction, or the logic of the relationships.
BioSamples currently supports four types of sample relationships


.. list-table:: Sample Relationships
   :widths: 25 25 25
   :header-rows: 1

   * - **Relationship types**
     - **Reverse relationships**
     - **Description**
   * - ``derived from``
     - ``derived from (reverse)``
     - *Sample A is derived from Sample B. E.g.*
        - *Tissue samples derived from donor samples*
        - *Cell line samples derived from tissue samples*
        - *Microbial samples derived from environmental samples*
   * - ``same as``
     - ``same as``
     - *Sample A is the same as Sample B. This can be used to link duplicated samples.*
   * - ``has member``
     - ``has member (reverse)``
     - *Sample A is a member of Sample group G. BioSamples create a sample group for each sampleTab submission\*. It's also possible to put patient samples as a sample group.*
   * - ``child of``
     - ``child of (reverse)``
     - *Sample A is the child of Sample B. E.g.*
        - *Patient A is the child of Patient B*

\*For samples in the same project or study, it is recommended to provide the project or study information as an attribute, rather than providing ``has member`` relationships to avoid duplication.



Sample Dates
------------
BioSamples keeps records of different dates related to the sample lifecycle. The dates can be generated either by data archives or by the data submitters for data exchange or experiment purposes.

.. list-table:: Sample date fields
   :header-rows: 1
   :widths: 30 70

   * - **Date type**
     - **Description**
   * - ``Submitted on``
     - The earliest date at which valid metadata has been provided by the submitter.
       This attribute is generated by BioSamples and other INSDC partners.
   * - ``Released on``
     - The user-supplied date at which the sample metadata is made publicly available
       for the first time.
   * - ``Last reviewed``
     - The date at which a new curation object has been created or automatic curation
       pipelines have been run on the sample metadata. This field is only present if at
       least one curation object has been added by the curation pipelines. The “last
       reviewed” date is updated when the curation objects are reviewed—even if they are
       found still valid and unmodified—and indicates that the sample is compliant with
       the latest BioSamples curation rules. See :ref:`Submit curation object`. This attribute
       is generated by BioSamples.
   * - ``INSDC first public and INSDC last update``
     - You might see additional dates or timestamps in the sample’s ``attributes``
       section, such as *INSDC first public* and *INSDC last update*. These are generated
       by other data archives and appear due to data exchange with other archives
       participating in the International Nucleotide Sequence Database Collaboration (INSDC).


.. _Reporting Missing Values:

Reporting Missing Values
------------------------

The International Nucleotide Database Collaboration (INSDC) have a standardised missing/null value reporting language to be used where a value of an expected format for sample metadata reporting can not be provided.

The controlled vocabulary takes into account different type of constraints. Submitters are strongly encouraged to always provide true values.
However, if missing/null value reporting is required, submitters are asked to use a term with the finest granularity for their situation. See the table below for accepted missing value reporting terms.

.. list-table:: Recommended terms for reporting missing values
   :header-rows: 1
   :widths: 25 75

   * - **Value**
     - **Definition**
   * - ``not collected``
     - Information was not given because it has not been collected, and will always be missing.
   * - ``not provided``
     - Information may have been collected but was not provided with the submission. It may be added later.
   * - ``restricted access``
     - Information exists but cannot be released openly because of privacy or confidentiality concerns.

**Important**: Any other placeholder values (such as ``n/a``, ``na``, ``n.a``, ``none``, ``unknown``, ``--``, ``.``, ``null``, ``missing``, ``not reported``, ``not requested``, ``not applicable``, ``not specified``, and ``not known``) **should not be used** and **must be removed** from submissions. If included, these will be eliminated during automatic curation.

Related Documentation
~~~~~~~~~~~~~~~~~~~~~
- FAANG: `Missing values <https://dcc-documentation.readthedocs.io/en/latest/experiment/ena_template/#5-missing-values>`_
- ENA: `Missing value reporting <https://www.ebi.ac.uk/ena/about/missing-values-reporting>`_


